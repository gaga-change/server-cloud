<!doctype html>
<html class="no-js" lang="">
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>gaga_change</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<body>
<button onclick="takePhoto()">歪哥</button>
</body>
</html>
<script type="text/javascript" src="http://yanjundong.com/js/lib/jquery.min.js"></script>
<script type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
	console.log(location.href.split('#')[0]);

	$.ajax({
		url: "http://192.168.3.10/php/index.php?appid=wxd74b67a87425f135&secret=96b7fc85b747bad4b4da2a8a8c74bfc9&url=" + location.href.split('#')[0],
		method: "GET",
		dataType: "json",
		success: function (result) {
			console.log(result);

			wx.config({
				debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
				appId: result.appId, // 必填，公众号的唯一标识
				timestamp: result.timestamp, // 必填，生成签名的时间戳
				nonceStr: result.nonceStr, // 必填，生成签名的随机串
				signature: result.signature,// 必填，签名，见附录1
				jsApiList: ["chooseImage"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
			});


		},
		error: function (e) {
			console.log(e);
		}

	});

	function takePhoto() {
		wx.chooseImage({
			count: 9, // 默认9
			sizeType: ['compressed'], // 可以指定是原图还是压缩图，默认二者都有
			sourceType: ['camera'], // 可以指定来源是相册还是相机，默认二者都有
			success: function (res) {
				var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片
			}
		});
	}


</script>
